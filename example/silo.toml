version = 1

[ports]
WEB_PORT = 3000
API_PORT = 8080
REDIS_PORT = 6379
TILT_PORT = 10350
K3D_REGISTRY_PORT = 5000
K3D_LB_HTTP_PORT = 8880
K3D_LB_HTTPS_PORT = 8443

[hosts]
APP_HOST = "${name}.localhost"
API_HOST = "api.${name}.localhost"

[urls]
WEB_URL = "http://${APP_HOST}:${WEB_PORT}"
API_URL = "http://${API_HOST}:${API_PORT}"
REDIS_URL = "redis://localhost:${REDIS_PORT}"

[k3d]
enabled = true
args = [
  # Route host ports to cluster ingress via the k3d loadbalancer
  "--port=${K3D_LB_HTTP_PORT}:80@loadbalancer",
  "--port=${K3D_LB_HTTPS_PORT}:443@loadbalancer",
]

[k3d.registry]
enabled = true

[hooks]
pre-up = ["./scripts/check-deps.sh"]
post-up = ["./scripts/seed-data.sh"]
